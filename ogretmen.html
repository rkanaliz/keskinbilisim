<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEB Uyumlu GÃ¼nlÃ¼k Plan OluÅŸturucu</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Kurumsal Arka Plan - Slate-50 */
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        .custom-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%232563eb' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
        }
        .animate-slide-up { animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* AI Response Table Styles */
        .ai-response table { width: 100%; border-collapse: collapse; margin-top: 10px; margin-bottom: 10px; font-size: 0.9rem; }
        .ai-response th, .ai-response td { border: 1px solid #cbd5e1; padding: 8px; text-align: left; }
        .ai-response th { background-color: #f1f5f9; font-weight: 600; color: #1e293b; }
        .ai-response ul { list-style-type: disc; padding-left: 1.5rem; margin-top: 0.5rem; margin-bottom: 0.5rem; }
        .ai-response li { margin-bottom: 0.25rem; }
        .ai-response strong { color: #1e40af; }

        /* YazdÄ±rma Stilleri */
        @media print {
            body * { visibility: hidden; }
            #printable-area, #printable-area * { visibility: visible; }
            #printable-area { position: absolute; left: 0; top: 0; width: 100%; background: white; color: black; padding: 20px; z-index: 9999; box-shadow: none; border: none; }
            .no-print { display: none !important; }
        }
        
        /* Tablo Stilleri (Plan Ä°Ã§in) */
        .plan-table table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; font-size: 0.9rem; font-family: 'Times New Roman', serif; }
        .plan-table th, .plan-table td { border: 1px solid #000; padding: 8px; text-align: left; vertical-align: top; }
        .plan-table th { background-color: #f1f5f9; font-weight: 700; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        
        // --- KAZANIM VERÄ° SETÄ° (DEÄÄ°ÅMEDÄ°) ---
        const LEARNING_OUTCOMES = {
            "5. SÄ±nÄ±f": {
                "BTY.5.1.1": { text: "GÃ¼nlÃ¼k yaÅŸamda kullanÄ±lan biliÅŸim teknolojilerini sÄ±nÄ±flandÄ±rÄ±r.", theme: "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°" },
                "BTY.5.1.2": { text: "BiliÅŸim teknolojilerinin birey ve toplum Ã¼zerindeki etkilerini Ã¶zetler.", theme: "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°" },
                "BTY.5.1.3": { text: "Dijital vatandaÅŸlÄ±k uygulamalarÄ±nÄ± sÄ±nÄ±flandÄ±rÄ±r.", theme: "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°" },
                "BTY.5.1.4": { text: "Yapay zekÃ¢ ile ilgili temel kavramlarÄ± ve Ã¶zellikleri sorgular.", theme: "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°" },
                "BTY.5.1.5": { text: "Bilgisayar sistemlerini Ã§Ã¶zÃ¼mler.", theme: "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°" },
                "BTY.5.1.6": { text: "Dosya ve klasÃ¶r yÃ¶netimi ile ilgili temel iÅŸlemlerle Ã§alÄ±ÅŸÄ±r.", theme: "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°" },
                "BTY.5.2.1": { text: "GÃ¶rsel dÃ¼zenleme programlarÄ±ndan yararlanÄ±r.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.5.2.2": { text: "GÃ¶rsel iÃ§in kurgu oluÅŸturur.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.5.2.3": { text: "GÃ¶rsel dosyasÄ± geliÅŸtirir.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.5.2.4": { text: "Kelime iÅŸlemci programlarÄ±ndan yararlanÄ±r.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.5.2.5": { text: "Kelime iÅŸlemci dosyasÄ± geliÅŸtirir.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.5.2.6": { text: "Sunum programlarÄ±ndan yararlanÄ±r.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.5.2.7": { text: "Sunum dosyasÄ± geliÅŸtirir.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.5.3.1": { text: "Bilgisayar aÄŸlarÄ± ve bileÅŸenlerini sorgular.", theme: "3. BÄ°LGÄ°SAYAR AÄLARI VE Ä°LETÄ°ÅÄ°M" },
                "BTY.5.3.2": { text: "Bilgisayar aÄŸlarÄ± ve baÄŸlanma yÃ¶ntemlerini sÄ±nÄ±flandÄ±rÄ±r.", theme: "3. BÄ°LGÄ°SAYAR AÄLARI VE Ä°LETÄ°ÅÄ°M" },
                "BTY.5.3.3": { text: "Ä°nternet ile amacÄ±na uygun olarak Ã§alÄ±ÅŸÄ±r.", theme: "3. BÄ°LGÄ°SAYAR AÄLARI VE Ä°LETÄ°ÅÄ°M" },
                "BTY.5.4.1": { text: "BiliÅŸim etiÄŸi kural ve ilkelerini yorumlar.", theme: "4. BÄ°LÄ°ÅÄ°M ETÄ°ÄÄ° VE SÄ°BER GÃœVENLÄ°K" },
                "BTY.5.4.2": { text: "Dijital ortamlarda gizlilik ve gÃ¼venlik Ã¶nlemlerini yÃ¶netir.", theme: "4. BÄ°LÄ°ÅÄ°M ETÄ°ÄÄ° VE SÄ°BER GÃœVENLÄ°K" },
                "BTY.5.5.1": { text: "Yapay zekÃ¢ uygulamalarÄ±nÄ± sÄ±nÄ±flandÄ±rÄ±r.", theme: "5. YAPAY ZEKA" },
                "BTY.5.5.2": { text: "Yapay zekÃ¢ya iliÅŸkin etik ve gÃ¼venlik/gizlilik Ã¶nlemlerini yÃ¶netir.", theme: "5. YAPAY ZEKA" },
                "BTY.5.6.1": { text: "Problem Ã§Ã¶zÃ¼mÃ¼ iÃ§in algoritmik dÃ¼ÅŸÃ¼nÃ¼r.", theme: "6. YAZILIM TASARIMI VE PROGRAMLAMA" },
                "BTY.5.6.2": { text: "Algoritma oluÅŸturmada test eder ve hata ayÄ±klar.", theme: "6. YAZILIM TASARIMI VE PROGRAMLAMA" },
                "BTY.5.6.3": { text: "YazÄ±lÄ±m geliÅŸtirme sÃ¼recinde kullanÄ±lan bileÅŸenlerden yararlanÄ±r.", theme: "6. YAZILIM TASARIMI VE PROGRAMLAMA" },
                "BTY.5.6.4": { text: "Blok tabanlÄ± ortamda yazÄ±lÄ±m geliÅŸtirme sÃ¼recini yÃ¶netir.", theme: "6. YAZILIM TASARIMI VE PROGRAMLAMA" }
            },
            "6. SÄ±nÄ±f": {
                "BTY.6.1.1": { text: "YenilikÃ§i biliÅŸim teknolojilerini sÄ±nÄ±flandÄ±rÄ±r.", theme: "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°" },
                "BTY.6.1.2": { text: "BiliÅŸim teknolojisinin gelecekteki durumlarÄ±na yÃ¶nelik Ã§Ä±karÄ±m yapar.", theme: "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°" },
                "BTY.6.2.1": { text: "Tablolama programlarÄ±ndan yararlanÄ±r.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.2.2": { text: "Tablolama programlarÄ±nÄ±n kullanÄ±mÄ±na yÃ¶nelik problemleri belirler.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.2.3": { text: "Tablolama dosyasÄ±nda kullanÄ±lacak verileri toplar ve dÃ¼zenler.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.2.4": { text: "Tablolama programlarÄ± kullanarak bulgulara ulaÅŸÄ±r.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.2.5": { text: "Ses dÃ¼zenleme programlarÄ±ndan yararlanÄ±r.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.2.6": { text: "Ses dosyasÄ± iÃ§in kurgu oluÅŸturur.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.2.7": { text: "Ses dosyasÄ± geliÅŸtirir.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.2.8": { text: "Video dÃ¼zenleme programlarÄ±ndan yararlanÄ±r.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.2.9": { text: "Video dosyasÄ± iÃ§in kurgu oluÅŸturur.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.2.10": { text: "Video dosyasÄ± geliÅŸtirir.", theme: "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME" },
                "BTY.6.3.1": { text: "Ä°nternet ile amacÄ±na uygun olarak Ã§alÄ±ÅŸÄ±r.", theme: "3. BÄ°LGÄ°SAYAR AÄLARI VE Ä°LETÄ°ÅÄ°M" },
                "BTY.6.3.2": { text: "Ä°letiÅŸim teknolojilerini sÄ±nÄ±flandÄ±rÄ±r.", theme: "3. BÄ°LGÄ°SAYAR AÄLARI VE Ä°LETÄ°ÅÄ°M" },
                "BTY.6.3.3": { text: "Ä°letiÅŸim teknolojileri ile Ã§alÄ±ÅŸÄ±r.", theme: "3. BÄ°LGÄ°SAYAR AÄLARI VE Ä°LETÄ°ÅÄ°M" },
                "BTY.6.4.1": { text: "BiliÅŸim etiÄŸi kapsamÄ±nda gÃ¼venlik Ã¶nlemlerini yÃ¶netir.", theme: "4. BÄ°LÄ°ÅÄ°M ETÄ°ÄÄ° VE SÄ°BER GÃœVENLÄ°K" },
                "BTY.6.4.2": { text: "Telif hakkÄ± kavramÄ±nÄ± sorgular.", theme: "4. BÄ°LÄ°ÅÄ°M ETÄ°ÄÄ° VE SÄ°BER GÃœVENLÄ°K" },
                "BTY.6.4.3": { text: "Siber ortamda gÃ¼venlik Ã¶nlemlerini yÃ¶netir.", theme: "4. BÄ°LÄ°ÅÄ°M ETÄ°ÄÄ° VE SÄ°BER GÃœVENLÄ°K" },
                "BTY.6.4.4": { text: "KullanÄ±m haklarÄ±na gÃ¶re lisans tÃ¼rlerini karÅŸÄ±laÅŸtÄ±rÄ±r.", theme: "4. BÄ°LÄ°ÅÄ°M ETÄ°ÄÄ° VE SÄ°BER GÃœVENLÄ°K" },
                "BTY.6.5.1": { text: "Yapay zekÃ¢ girdileri hakkÄ±nda bilgi toplar.", theme: "5. YAPAY ZEKA" },
                "BTY.6.5.2": { text: "Yapay zekÃ¢ araÃ§ ve teknolojileri ile Ã§alÄ±ÅŸÄ±r.", theme: "5. YAPAY ZEKA" },
                "BTY.6.5.3": { text: "Yapay zekÃ¢ araÃ§ ve teknolojileri ile model geliÅŸtirir.", theme: "5. YAPAY ZEKA" },
                "BTY.6.6.1": { text: "Blok tabanlÄ± ortamda yazÄ±lÄ±m geliÅŸtirme sÃ¼recinde kullanÄ±lan bileÅŸenlerden yararlanÄ±r.", theme: "6. YAZILIM TASARIMI VE PROGRAMLAMA" },
                "BTY.6.6.2": { text: "Blok tabanlÄ± ortamda yazÄ±lÄ±m geliÅŸtirme sÃ¼recini yÃ¶netir.", theme: "6. YAZILIM TASARIMI VE PROGRAMLAMA" },
                "BTY.6.6.3": { text: "Blok tabanlÄ± ortamda yapay zekÃ¢ destekli Ã¼rÃ¼n ortaya koyar.", theme: "6. YAZILIM TASARIMI VE PROGRAMLAMA" }
            }
        };

        // --- MÃœFREDAT VERÄ° SETÄ° (DEÄÄ°ÅMEDÄ°) ---
        const DIFFERENTIATION_DATA = {
            "5. SÄ±nÄ±f": {
                "BiliÅŸim Teknolojileri ve YazÄ±lÄ±m": {
                    "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°": {
                        title: "1. Tema: BiliÅŸim Teknolojilerinin HayatÄ±mÄ±zdaki Yeri (14 Ders Saati)",
                        enrichment: ["Ã–ÄŸrencilerin 'bilgi' kavramÄ±nÄ± merkeze alarak gÃ¼nlÃ¼k yaÅŸamda karÅŸÄ±laÅŸtÄ±klarÄ± teknolojik bilgileri karÅŸÄ±laÅŸtÄ±rmalarÄ± saÄŸlanabilir.", "Aile bÃ¼yÃ¼kleriyle rÃ¶portaj yaparak geÃ§miÅŸte kullanÄ±lan biliÅŸim teknolojilerini araÅŸtÄ±rmalarÄ± ve sÄ±nÄ±fla paylaÅŸmalarÄ± istenebilir.", "GeÃ§miÅŸten gÃ¼nÃ¼mÃ¼ze biliÅŸim teknolojilerini iÃ§eren bir zaman Ã§izelgesi oluÅŸturarak geliÅŸimi analiz etmeleri istenebilir."],
                        support: ["BiliÅŸim teknolojilerine dair temel kavramlarÄ± (donanÄ±m, yazÄ±lÄ±m vb.) iÃ§eren kavram haritalarÄ± oluÅŸturulabilir.", "GeÃ§miÅŸ ve gÃ¼nÃ¼mÃ¼z teknoloji araÃ§larÄ±nÄ± iÃ§eren kartlarla basit bir zaman Ã§izelgesi oluÅŸturmalarÄ± istenebilir."]
                    },
                    "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME": {
                        title: "2. Tema: Dijital ÃœrÃ¼n TasarÄ±mÄ± ve GeliÅŸtirme (12 Ders Saati)",
                        enrichment: ["Sosyal bir problem ya da gÃ¼ncel bir olay Ã¼zerine bilgilendirici dijital broÅŸÃ¼r ya da farkÄ±ndalÄ±k afiÅŸleri tasarlamalarÄ± saÄŸlanabilir.", "Bir hikaye oluÅŸturup bunu storyboard tekniÄŸiyle gÃ¶rsellerle kurgulayarak anlatmalarÄ± istenebilir."],
                        support: ["HazÄ±r bir gÃ¶rsel Ã¼zerinde basit dÃ¼zenleme iÅŸlemleri (kÄ±rpma, parlaklÄ±k ayarÄ±, metin ekleme) yapmalarÄ± istenebilir.", "YarÄ±m bÄ±rakÄ±lmÄ±ÅŸ bir metni kelime iÅŸlemci programÄ±nda tamamlayÄ±p biÃ§imlendirmeleri istenebilir."]
                    },
                    "3. BÄ°LGÄ°SAYAR AÄLARI VE Ä°LETÄ°ÅÄ°M": {
                        title: "3. Tema: Bilgisayar AÄŸlarÄ± ve Ä°letiÅŸim (6 Ders Saati)",
                        enrichment: ["Ã‡evrelerinde gÃ¶zlemleyebildikleri farklÄ± aÄŸ tÃ¼rlerini listelemeleri ve ÅŸematize etmeleri istenebilir.", "Bir simÃ¼lasyon ortamÄ±nda ortaya Ã§Ä±kan aÄŸ sorunlarÄ±nÄ± (baÄŸlantÄ± kopmasÄ± vb.) tespit edip Ã§Ã¶zmeleri istenebilir."],
                        support: ["Bilgisayar aÄŸlarÄ±nÄ±n Ã§alÄ±ÅŸma mantÄ±ÄŸÄ±nÄ± gÃ¶steren animasyonlar izletilebilir.", "AÄŸ bileÅŸenlerini (modem, kablo) somut Ã¶rneklerle incelemeleri saÄŸlanabilir."]
                    },
                    "4. BÄ°LÄ°ÅÄ°M ETÄ°ÄÄ° VE SÄ°BER GÃœVENLÄ°K": {
                        title: "4. Tema: BiliÅŸim EtiÄŸi ve Siber GÃ¼venlik (4 Ders Saati)",
                        enrichment: ["BiliÅŸim etiÄŸini konu alan kÄ±sa bir film veya animasyon senaryosu hazÄ±rlamalarÄ± istenebilir.", "Belirli bir siber gÃ¼venlik senaryosu Ã¼zerinde derinlemesine analiz yapÄ±p Ã§Ã¶zÃ¼m Ã¶nerileri geliÅŸtirmeleri istenebilir."],
                        support: ["BiliÅŸim etiÄŸi kurallarÄ±nÄ± iÃ§eren kÄ±sa animasyonlar ve videolar izletilebilir.", "DoÄŸru/YanlÄ±ÅŸ kartlarÄ± ile gÃ¼venli ÅŸifre oluÅŸturma ve etik kurallar oyunu oynatÄ±labilir."]
                    },
                    "5. YAPAY ZEKA": {
                        title: "5. Tema: Yapay Zeka (8 Ders Saati)",
                        enrichment: ["Yapay zeka tarihinden bir dÃ¶nÃ¼m noktasÄ±nÄ± seÃ§ip 'YaÅŸanmasaydÄ± ne olurdu?' temalÄ± alternatif tarih senaryosu yazmalarÄ± istenebilir.", "Yapay zekanÄ±n alt dallarÄ±nÄ± (Makine Ã¶ÄŸrenmesi, Derin Ã¶ÄŸrenme) araÅŸtÄ±rÄ±p bir rapor sunmalarÄ± istenebilir."],
                        support: ["Yapay zekanÄ±n olasÄ± kullanÄ±m alanlarÄ±yla ilgili yaratÄ±cÄ± Ã§izimler yapmalarÄ± istenebilir.", "Yapay zekanÄ±n doÄŸru ve yanlÄ±ÅŸ kullanÄ±m alanlarÄ±nÄ± listelemeleri istenebilir."]
                    },
                    "6. YAZILIM TASARIMI VE PROGRAMLAMA": {
                        title: "6. Tema: YazÄ±lÄ±m TasarÄ±mÄ± ve Programlama (24 Ders Saati)",
                        enrichment: ["Klasik 'Kurt, Kuzu, Ot' problemine benzer, daha karmaÅŸÄ±k kurallar iÃ§eren Ã¶zgÃ¼n bir mantÄ±k bulmacasÄ± tasarlayÄ±p Ã§Ã¶zmeleri istenebilir.", "Okul sorunlarÄ±na yÃ¶nelik (kÃ¼tÃ¼phane sistemi, nÃ¶betÃ§i Ã¶ÄŸrenci takibi vb.) proje fikirleri geliÅŸtirmeleri istenebilir."],
                        support: ["Algoritma geliÅŸtirme becerileri iÃ§in 'Code.org' veya benzeri blok tabanlÄ± interaktif araÃ§lar kullanÄ±labilir.", "GÃ¼nlÃ¼k yaÅŸam problemleri (tost yapma, okula gitme) Ã¼zerinden akÄ±ÅŸ ÅŸemalarÄ± oluÅŸturulabilir."]
                    }
                }
            },
            "6. SÄ±nÄ±f": {
                "BiliÅŸim Teknolojileri ve YazÄ±lÄ±m": {
                    "1. BÄ°LÄ°ÅÄ°M TEKNOLOJÄ°LERÄ°NÄ°N HAYATIMIZDAKÄ° YERÄ°": {
                        title: "1. Tema: BiliÅŸim Teknolojilerinin HayatÄ±mÄ±zdaki Yeri (4 Ders Saati)",
                        enrichment: ["SÄ±nÄ±fta bir 'Teknoloji FuarÄ±' dÃ¼zenleyerek farklÄ± kategorilerdeki yenilikÃ§i teknolojileri tanÄ±tmalarÄ± istenebilir.", "ArtÄ±rÄ±lmÄ±ÅŸ gerÃ§eklik (AR) uygulamalarÄ±nÄ± kullanarak sÄ±nÄ±f iÃ§inde bir doÄŸa keÅŸif etkinliÄŸi tasarlamalarÄ± istenebilir."],
                        support: ["BiliÅŸim teknolojilerinin tarihsel geliÅŸimini gÃ¶steren gÃ¶rsellerle bir zaman Ã§izelgesi oluÅŸturmalarÄ± istenebilir.", "Sanal teknoloji mÃ¼zesi gezisi ile eski ve yeni teknolojileri karÅŸÄ±laÅŸtÄ±rmalarÄ± saÄŸlanabilir."]
                    },
                    "2. DÄ°JÄ°TAL ÃœRÃœN TASARIMI VE GELÄ°ÅTÄ°RME": {
                        title: "2. Tema: Dijital ÃœrÃ¼n TasarÄ±mÄ± ve GeliÅŸtirme (12 Ders Saati)",
                        enrichment: ["Tablolama programÄ±nda aile bÃ¼tÃ§esi veya sÄ±nÄ±f verilerini analiz eden, formÃ¼l ve grafik iÃ§eren iÅŸlevsel tablolar hazÄ±rlamalarÄ± istenebilir.", "Bir film prodÃ¼ksiyon sÃ¼recini (senaryo, Ã§ekim planÄ±) anlatan kapsamlÄ± bir sunum dosyasÄ± hazÄ±rlamalarÄ± istenebilir."],
                        support: ["Ã‡evrim iÃ§i kullanÄ±labilecek basit tablolama veya video dÃ¼zenleme araÃ§larÄ±nÄ± araÅŸtÄ±rÄ±p listelemeleri istenebilir.", "Tablolama programlarÄ±nÄ±n kullanÄ±m amaÃ§larÄ±nÄ± anlatan basit bir sunum hazÄ±rlamalarÄ± istenebilir."]
                    },
                    "3. BÄ°LGÄ°SAYAR AÄLARI VE Ä°LETÄ°ÅÄ°M": {
                        title: "3. Tema: Bilgisayar AÄŸlarÄ± ve Ä°letiÅŸim (4 Ders Saati)",
                        enrichment: ["Verilen bir konu hakkÄ±nda farklÄ± arama motorlarÄ±nÄ± (akademik vb.) kullanarak bilgi toplayÄ±p sonuÃ§larÄ± karÅŸÄ±laÅŸtÄ±rmalarÄ± istenebilir.", "FarklÄ± iletiÅŸim araÃ§larÄ± (e-posta, sosyal medya, forum) iÃ§in uygun dilde farklÄ± mesajlar hazÄ±rlamalarÄ± istenebilir."],
                        support: ["Arama motorlarÄ±nÄ±n nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± gÃ¶steren gÃ¶rsel materyallerle Ã¶rnek aramalar yapmalarÄ± saÄŸlanabilir.", "Ä°letiÅŸim teknolojilerini anlatan animasyonlar izletilebilir."]
                    },
                    "4. BÄ°LÄ°ÅÄ°M ETÄ°ÄÄ° VE SÄ°BER GÃœVENLÄ°K": {
                        title: "4. Tema: BiliÅŸim EtiÄŸi ve Siber GÃ¼venlik (4 Ders Saati)",
                        enrichment: ["Ä°nternetin bilinÃ§li kullanÄ±mÄ±yla ilgili bir kamu spotu videosu oluÅŸturmalarÄ± istenebilir.", "Siber zorbalÄ±ÄŸa uÄŸrayan birinin duygularÄ±nÄ± anlatan bir drama veya tiyatro gÃ¶sterisi hazÄ±rlamalarÄ± istenebilir."],
                        support: ["BiliÅŸim etiÄŸi konularÄ±nÄ± somutlaÅŸtÄ±ran Ã¶rnek olay videolarÄ± izletilebilir.", "Siber zorbalÄ±k ve etik ihlallerini iÃ§eren kartlarla doÄŸru/yanlÄ±ÅŸ oyunu oynatÄ±labilir."]
                    },
                    "5. YAPAY ZEKA": {
                        title: "5. Tema: Yapay Zeka (10 Ders Saati)",
                        enrichment: ["Yapay zekanÄ±n farklÄ± disiplinlerdeki (Fen, TÃ¼rkÃ§e, MÃ¼zik) kullanÄ±mÄ±nÄ± araÅŸtÄ±rÄ±p disiplinler arasÄ± bir sunum hazÄ±rlamalarÄ± istenebilir.", "FarklÄ± disiplinler iÃ§in yapay zeka 'girdileri' (veri setleri) Ã¼retmeleri ve bunlarÄ± modellemeleri istenebilir."],
                        support: ["Yapay zeka uygulamalarÄ±nÄ±n Ã§alÄ±ÅŸma mantÄ±ÄŸÄ±nÄ± (Girdi -> Ä°ÅŸlem -> Ã‡Ä±ktÄ±) gÃ¶steren videolar izletilebilir.", "Sesli asistanlar veya Ã¶neri sistemleri gibi basit yapay zeka araÃ§larÄ±nÄ± deneyimlemeleri saÄŸlanabilir."]
                    },
                    "6. YAZILIM TASARIMI VE PROGRAMLAMA": {
                        title: "6. Tema: YazÄ±lÄ±m TasarÄ±mÄ± ve Programlama (34 Ders Saati)",
                        enrichment: ["Yapay zeka kullanan bir mesleÄŸi araÅŸtÄ±rÄ±p, o meslekteki deÄŸiÅŸimleri sunmalarÄ± istenebilir.", "Yapay zekaya Ã¶zel aÃ§Ä±k veri setleri kullanarak basit bir sÄ±nÄ±flandÄ±rma modeli (Ã¶rneÄŸin bitki tÃ¼rÃ¼ tanÄ±ma) eÄŸitmeleri istenebilir."],
                        support: ["DeÄŸiÅŸkenler, dÃ¶ngÃ¼ler ve koÅŸullar gibi kavramlar iÃ§in interaktif web 2.0 oyunlarÄ± kullanÄ±labilir.", "AdÄ±m adÄ±m yÃ¶nergelerle basit bir karakter hareket ettirme veya Ä±ÅŸÄ±k yakma projesi yapmalarÄ± saÄŸlanabilir."]
                    }
                }
            }
        };

        // --- TEMA ADI NORMALÄ°ZASYON FONKSÄ°YONU ---
        function normalizeThemeName(str) {
            if (!str) return "";
            let s = str.toLocaleLowerCase('tr');
            s = s.replace(/Ã§/g, "c").replace(/ÄŸ/g, "g").replace(/Ä±/g, "i").replace(/Ã¶/g, "o").replace(/ÅŸ/g, "s").replace(/Ã¼/g, "u");
            s = s.replace(/[\d\(\)\.:\-]/g, " "); 
            s = s.replace(/\b(tema|ders|saati)\b/g, " ");
            s = s.replace(/\s+/g, " ").trim();
            return s;
        }

        // --- GEMINI API ENTEGRASYONU (DÄ°NAMÄ°K API KEY) ---
        async function generateWithGemini(promptText, userKey) {
            if (!userKey) {
                return "<b>HATA:</b> LÃ¼tfen sayfanÄ±n Ã¼st kÄ±smÄ±ndaki kutuya geÃ§erli bir Google Gemini API anahtarÄ± giriniz.";
            }
            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${userKey}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: promptText }] }]
                        })
                    }
                );

                if (!response.ok) throw new Error(`API hatasÄ±: ${response.status}`);
                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error("Gemini HatasÄ±:", error);
                return "ÃœzgÃ¼nÃ¼m, ÅŸu anda yapay zeka servisine ulaÅŸÄ±lamÄ±yor. API anahtarÄ±nÄ±zÄ± kontrol ediniz.";
            }
        }

        // --- COMPONENTS ---

        function Header({ onLogoClick }) {
            return (
                <div className="bg-slate-900 border-b border-slate-800 shadow-sm py-4 mb-8 no-print">
                    <div className="container mx-auto px-4 flex items-center justify-between">
                        <div className="flex items-center gap-3">
                            <a href="index.html" className="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-900 cursor-pointer hover:opacity-90 transition-opacity no-underline">
                                <i className="fa-solid fa-home"></i>
                            </a>
                            <div>
                                <h1 className="text-xl font-bold text-white tracking-tight">MEB Uyumlu GÃ¼nlÃ¼k Plan OluÅŸturucu</h1>
                                <p className="text-xs text-slate-300 font-medium">TÃ¼rkiye YÃ¼zyÄ±lÄ± Maarif Modeli & AI</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function APIKeyInput({ apiKey, setApiKey }) {
            return (
                <div className="bg-yellow-50 border border-yellow-200 p-4 rounded-xl mb-6 flex flex-col md:flex-row md:items-center gap-4 no-print">
                    <div className="flex-1">
                        <label className="block text-xs font-bold text-yellow-800 uppercase mb-1">Google Gemini API AnahtarÄ±</label>
                        <input 
                            type="password" 
                            value={apiKey} 
                            onChange={(e) => {
                                setApiKey(e.target.value);
                                localStorage.setItem('gemini_key', e.target.value);
                            }} 
                            placeholder="AI Studio API Key yapÄ±ÅŸtÄ±rÄ±n..." 
                            className="w-full border border-yellow-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500 bg-white"
                        />
                    </div>
                    <div className="text-xs text-yellow-700 md:max-w-xs">
                        <i className="fa-solid fa-lock mr-1"></i> AnahtarÄ±nÄ±z sadece tarayÄ±cÄ±nÄ±zda (Local Storage) saklanÄ±r, sunucuya gÃ¶nderilmez. GÃ¼venlidir.
                    </div>
                </div>
            )
        }

        function TeacherProfileCard() {
            const [profile, setProfile] = React.useState({ name: "", school: "", principal: "" });
            const [isExpanded, setIsExpanded] = React.useState(false);

            React.useEffect(() => {
                const saved = localStorage.getItem('btyTeacherProfile');
                if (saved) setProfile(JSON.parse(saved));
            }, []);

            const handleSave = () => {
                localStorage.setItem('btyTeacherProfile', JSON.stringify(profile));
                if (typeof window !== "undefined" && window.dispatchEvent) {
                    window.dispatchEvent(new CustomEvent("btyProfileUpdated", { detail: profile }));
                }
                setIsExpanded(false);
            };

            const handleChange = (field, value) => {
                setProfile(prev => ({ ...prev, [field]: value }));
            };

            return (
                <div className="bg-white border border-slate-200 rounded-xl p-4 mb-6 shadow-sm no-print">
                    <div className="flex justify-between items-center cursor-pointer" onClick={() => setIsExpanded(!isExpanded)}>
                        <h3 className="text-slate-800 font-bold flex items-center gap-2 text-sm">
                            <i className="fa-solid fa-user-tie text-blue-600"></i> Ã–ÄŸretmen Bilgileri / Profil
                        </h3>
                        <button className="text-slate-400 hover:text-slate-600">{isExpanded ? 'â–¼' : 'â–¶'}</button>
                    </div>
                    
                    {isExpanded && (
                        <div className="mt-4 grid md:grid-cols-3 gap-3 animate-slide-up">
                            <div>
                                <label className="block text-xs font-semibold text-slate-500 uppercase mb-1">Ad Soyad</label>
                                <input type="text" value={profile.name} onChange={(e) => handleChange('name', e.target.value)} className="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:ring-1 focus:ring-blue-500 outline-none" />
                            </div>
                            <div>
                                <label className="block text-xs font-semibold text-slate-500 uppercase mb-1">Okul AdÄ±</label>
                                <input type="text" value={profile.school} onChange={(e) => handleChange('school', e.target.value)} className="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:ring-1 focus:ring-blue-500 outline-none" />
                            </div>
                            <div>
                                <label className="block text-xs font-semibold text-slate-500 uppercase mb-1">Okul MÃ¼dÃ¼rÃ¼</label>
                                <input type="text" value={profile.principal} onChange={(e) => handleChange('principal', e.target.value)} className="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:ring-1 focus:ring-blue-500 outline-none" />
                            </div>
                            <div className="md:col-span-3 text-right">
                                <button onClick={handleSave} className="bg-blue-600 hover:bg-blue-700 text-white text-xs px-4 py-2 rounded transition-colors">Kaydet & Kapat</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        function InfoBox() {
            return (
                <div className="bg-white border border-slate-200 rounded-xl p-6 mb-8 shadow-sm no-print">
                    <h3 className="text-blue-800 font-bold mb-2 flex items-center gap-2">
                        <i className="fa-solid fa-circle-info"></i> BTY Dersi Pedagojik Ã‡erÃ§eve
                    </h3>
                    <p className="text-slate-600 text-sm leading-relaxed">
                        BiliÅŸim Teknolojileri ve YazÄ±lÄ±m dersi iÃ§in farklÄ±laÅŸtÄ±rma; Ã¶ÄŸrencilerin dijital okuryazarlÄ±k seviyelerine, ilgi alanlarÄ±na ve Ã¶ÄŸrenme hÄ±zlarÄ±na gÃ¶re iÃ§erik, sÃ¼reÃ§ ve Ã¼rÃ¼nÃ¼n uyarlanmasÄ±nÄ± kapsar. Bu araÃ§, mÃ¼fredattaki <strong>ZenginleÅŸtirme</strong> ve <strong>Destekleme</strong> etkinliklerine hÄ±zlÄ± eriÅŸim saÄŸlar ve yapay zeka ile yeni fikirler Ã¼retir.
                    </p>
                </div>
            );
        }

        function FilterBar({ onSearch }) {
            const [selectedClass, setSelectedClass] = React.useState("");
            const [selectedLesson, setSelectedLesson] = React.useState("");
            const [selectedUnit, setSelectedUnit] = React.useState("");

            const classes = Object.keys(DIFFERENTIATION_DATA);
            const lessons = selectedClass ? Object.keys(DIFFERENTIATION_DATA[selectedClass] || {}) : [];
            const units = (selectedClass && selectedLesson) ? Object.keys(DIFFERENTIATION_DATA[selectedClass][selectedLesson] || {}) : [];

            const handleShowClick = () => {
                if(selectedClass && selectedLesson && selectedUnit) {
                    const data = DIFFERENTIATION_DATA[selectedClass][selectedLesson][selectedUnit];
                    onSearch(data, { grade: selectedClass, lesson: selectedLesson, unit: selectedUnit });
                } else {
                    alert("LÃ¼tfen bir Ã–ÄŸrenme AlanÄ±/Tema seÃ§iniz.");
                }
            };

            return (
                <div className="bg-white p-5 rounded-2xl shadow-xl shadow-slate-200 border border-slate-100 flex flex-col md:flex-row gap-4 items-center mb-8 no-print">
                    <div className="w-full relative group">
                        <label className="text-xs text-slate-400 font-semibold uppercase ml-1 mb-1 block">SÄ±nÄ±f DÃ¼zeyi</label>
                        <select className="w-full appearance-none bg-slate-50 border border-slate-200 hover:border-blue-400 px-4 py-3 rounded-lg leading-tight focus:outline-none focus:ring-2 focus:ring-blue-100 custom-select text-slate-700 transition-colors" value={selectedClass} onChange={(e) => {setSelectedClass(e.target.value); setSelectedLesson(""); setSelectedUnit("");}}>
                            <option value="">SeÃ§iniz...</option>
                            {classes.map(c => <option key={c} value={c}>{c}</option>)}
                        </select>
                    </div>
                    <div className="w-full relative group">
                        <label className="text-xs text-slate-400 font-semibold uppercase ml-1 mb-1 block">Ders</label>
                        <select className="w-full appearance-none bg-slate-50 border border-slate-200 hover:border-blue-400 px-4 py-3 rounded-lg leading-tight focus:outline-none focus:ring-2 focus:ring-blue-100 custom-select text-slate-700 disabled:bg-slate-100 disabled:text-slate-400 transition-colors" value={selectedLesson} onChange={(e) => {setSelectedLesson(e.target.value); setSelectedUnit("");}} disabled={!selectedClass}>
                            <option value="">Ders SeÃ§iniz...</option>
                            {lessons.map(l => <option key={l} value={l}>{l}</option>)}
                        </select>
                    </div>
                    <div className="w-full relative group">
                        <label className="text-xs text-slate-400 font-semibold uppercase ml-1 mb-1 block">Tema / Ãœnite</label>
                        <select className="w-full appearance-none bg-slate-50 border border-slate-200 hover:border-blue-400 px-4 py-3 rounded-lg leading-tight focus:outline-none focus:ring-2 focus:ring-blue-100 custom-select text-slate-700 disabled:bg-slate-100 disabled:text-slate-400 transition-colors" value={selectedUnit} onChange={(e) => setSelectedUnit(e.target.value)} disabled={!selectedLesson}>
                            <option value="">Tema SeÃ§iniz...</option>
                            {units.map(u => <option key={u} value={u}>{u}</option>)}
                        </select>
                    </div>
                    <div className="w-full md:w-auto mt-6">
                        <button onClick={handleShowClick} disabled={!selectedUnit} className="w-full md:w-auto bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium py-3 px-8 rounded-lg shadow-lg shadow-blue-200 transition duration-200 flex items-center justify-center gap-2">
                            <span>Getir</span>
                        </button>
                    </div>
                </div>
            );
        }

        function AIAssistant({ context, apiKey }) {
            const [loading, setLoading] = React.useState(false);
            const [response, setResponse] = React.useState(null);
            const [activeTab, setActiveTab] = React.useState('ideas'); 
            const [customPrompt, setCustomPrompt] = React.useState("");

            const handleGenerate = async (type) => {
                setLoading(true);
                setResponse(null);
                
                let prompt = "";
                const baseInfo = `SÄ±nÄ±f: ${context.grade}, Ders: ${context.lesson}, Tema: ${context.unit}. TÃ¼rkiye YÃ¼zyÄ±lÄ± Maarif Modeli BiliÅŸim Teknolojileri ve YazÄ±lÄ±m dersi Ã¶ÄŸretim programÄ±na uygun olarak;`;

                if (type === 'enrichment') {
                    prompt = `${baseInfo} Ã¼st dÃ¼zey dijital becerilere sahip veya konuya ilgisi yÃ¼ksek Ã¶ÄŸrenciler iÃ§in (ZenginleÅŸtirme) 3 adet yenilikÃ§i, yaratÄ±cÄ± ve uygulanabilir sÄ±nÄ±f iÃ§i etkinlik Ã¶nerisi yaz. Kodlama, tasarÄ±m veya analiz iÃ§erebilir. Ã‡IKTIYI SADECE BÄ°R ADET HTML TABLO OLARAK VER. Tablo dÄ±ÅŸÄ±nda hiÃ§bir ÅŸey yazma. Tablo sÃ¼tunlarÄ±: 1) Etkinlik AdÄ± 2) AmaÃ§ / Hedef 3) Hedef Grup 4) SÃ¼re (dk) 5) KÄ±saca Uygulama 6) Gerekli Materyaller. En az 3 satÄ±r yaz.`;
                } else if (type === 'support') {
                    prompt = `${baseInfo} Ã¶ÄŸrenme gÃ¼Ã§lÃ¼ÄŸÃ¼ Ã§eken veya dijital okuryazarlÄ±ÄŸÄ± dÃ¼ÅŸÃ¼k Ã¶ÄŸrenciler iÃ§in (Destekleme) 3 adet somutlaÅŸtÄ±rÄ±cÄ±, sadeleÅŸtirici ve motive edici etkinlik Ã¶nerisi yaz. Unplugged (bilgisayarsÄ±z) etkinlikler de olabilir. Hedef grup: Ã¶ÄŸrenme gÃ¼Ã§lÃ¼ÄŸÃ¼ yaÅŸayan, dijital okuryazarlÄ±ÄŸÄ± sÄ±nÄ±rlÄ±, dikkati Ã§abuk daÄŸÄ±lan Ã¶ÄŸrenciler. Ã‡IKTIYI SADECE BÄ°R ADET HTML TABLO OLARAK VER. Tablo dÄ±ÅŸÄ±nda hiÃ§bir ÅŸey yazma. Tablo sÃ¼tunlarÄ±: 1) Etkinlik AdÄ± 2) AmaÃ§ / Hedef 3) Hedef Grup 4) SÃ¼re (dk) 5) KÄ±saca Uygulama 6) Gerekli Materyaller. En az 3 satÄ±r yaz.`;
                } else if (type === 'material') {
                    prompt = `${baseInfo} bu konuyu anlatÄ±rken kullanÄ±labilecek 5 adet dijital araÃ§, yazÄ±lÄ±m, web sitesi veya somut materyal Ã¶nerisi sun. Neden Ã¶nerdiÄŸini ve derste nasÄ±l kullanÄ±lacaÄŸÄ±nÄ± bir cÃ¼mleyle aÃ§Ä±kla. Ã‡IKTIYI SADECE BÄ°R ADET HTML TABLO OLARAK VER. Tablo dÄ±ÅŸÄ±nda hiÃ§bir ÅŸey yazma. SÃ¼tunlar: 1) AraÃ§ / Materyal 2) TÃ¼rÃ¼ 3) Ne Ä°ÅŸe Yarar? 4) Derste NasÄ±l KullanÄ±lÄ±r? 5) Dikkat / Not. En az 5 satÄ±r yaz.`;
                } else if (type === 'custom') {
                    prompt = `${baseInfo} Ã–ÄŸretmenin Ã¶zel isteÄŸi: "${customPrompt}". Bu isteÄŸe uygun pedagojik ve pratik bir Ã§Ã¶zÃ¼m/etkinlik Ã¶nerisi sun. Ã‡IKTIYI SADECE BÄ°R ADET HTML TABLO OLARAK VER. Tablo dÄ±ÅŸÄ±nda hiÃ§bir ÅŸey yazma. SÃ¼tunlar: 1) BaÅŸlÄ±k 2) Ã–nerilen Strateji 3) Uygulama AdÄ±mlarÄ±. 1â€“3 satÄ±r yaz.`;
                }

                const result = await generateWithGemini(prompt, apiKey);
                setResponse({ type, text: result });
                setLoading(false);
            };

            return (
                <div className="mt-8 border-t border-slate-200 pt-8 no-print">
                    <div className="bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl p-6 border border-slate-200">
                        <div className="flex items-center gap-3 mb-4">
                            <span className="text-2xl">ğŸ¤–</span>
                            <h3 className="text-lg font-bold text-slate-800">Yapay Zeka AsistanÄ± (Gemini)</h3>
                        </div>
                        
                        <div className="flex gap-2 mb-4 overflow-x-auto pb-2">
                            <button onClick={() => setActiveTab('ideas')} className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${activeTab === 'ideas' ? 'bg-blue-600 text-white' : 'bg-white text-slate-600 hover:bg-slate-100 border border-slate-200'}`}>âœ¨ Yeni Etkinlik Fikirleri</button>
                            <button onClick={() => setActiveTab('material')} className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${activeTab === 'material' ? 'bg-blue-600 text-white' : 'bg-white text-slate-600 hover:bg-slate-100 border border-slate-200'}`}>ğŸ§  AraÃ§ & Materyal</button>
                            <button onClick={() => setActiveTab('custom')} className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${activeTab === 'custom' ? 'bg-blue-600 text-white' : 'bg-white text-slate-600 hover:bg-slate-100 border border-slate-200'}`}>ğŸ¯ Ã–zel Durum</button>
                        </div>

                        <div className="bg-white rounded-xl p-4 shadow-sm min-h-[150px] border border-slate-100">
                            {activeTab === 'ideas' && (
                                <div className="space-y-3">
                                    <p className="text-sm text-slate-600 mb-2">Bu tema iÃ§in yapay zekadan anlÄ±k olarak yeni etkinlikler isteyin:</p>
                                    <div className="flex gap-3">
                                        <button onClick={() => handleGenerate('enrichment')} disabled={loading} className="flex-1 bg-purple-100 hover:bg-purple-200 text-purple-800 py-2 px-4 rounded-lg text-sm font-semibold transition-colors flex items-center justify-center gap-2">{loading ? 'Ãœretiliyor...' : 'ğŸš€ ZenginleÅŸtirme Ãœret'}</button>
                                        <button onClick={() => handleGenerate('support')} disabled={loading} className="flex-1 bg-amber-100 hover:bg-amber-200 text-amber-800 py-2 px-4 rounded-lg text-sm font-semibold transition-colors flex items-center justify-center gap-2">{loading ? 'Ãœretiliyor...' : 'ğŸ¤ Destekleme Ãœret'}</button>
                                    </div>
                                </div>
                            )}
                            {activeTab === 'material' && (
                                <div>
                                    <p className="text-sm text-slate-600 mb-3">Bu tema iÃ§in en uygun dijital araÃ§ ve materyal Ã¶nerilerini listeleyin:</p>
                                    <button onClick={() => handleGenerate('material')} disabled={loading} className="w-full bg-blue-50 hover:bg-blue-100 text-blue-700 py-2 px-4 rounded-lg text-sm font-semibold transition-colors border border-blue-200">{loading ? 'AraÃ§lar Bulunuyor...' : 'ğŸ“š Dijital AraÃ§ Ã–nerilerini Getir'}</button>
                                </div>
                            )}
                            {activeTab === 'custom' && (
                                <div>
                                    <p className="text-sm text-slate-600 mb-2">Ã–zel bir Ã¶ÄŸrenci durumu veya sÄ±nÄ±f ihtiyacÄ± belirtin:</p>
                                    <textarea value={customPrompt} onChange={(e) => setCustomPrompt(e.target.value)} placeholder="Ã–rn: SÄ±nÄ±fÄ±mda bilgisayar yok, bu konuyu unplugged (bilgisayarsÄ±z) nasÄ±l iÅŸleyebilirim?" className="w-full border border-slate-300 rounded-lg p-3 text-sm mb-3 focus:ring-2 focus:ring-blue-200 focus:outline-none" rows="2"></textarea>
                                    <button onClick={() => handleGenerate('custom')} disabled={loading || !customPrompt.trim()} className="w-full bg-emerald-100 hover:bg-emerald-200 text-emerald-800 py-2 px-4 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50">{loading ? 'DÃ¼ÅŸÃ¼nÃ¼lÃ¼yor...' : 'ğŸ’¡ Asistana Sor'}</button>
                                </div>
                            )}

                            {loading && (
                                <div className="mt-4 flex flex-col items-center justify-center py-4 text-slate-400">
                                    <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-2"></div>
                                    <span className="text-xs">Gemini dÃ¼ÅŸÃ¼nÃ¼yor...</span>
                                </div>
                            )}

                            {response && !loading && (
                                <div className="mt-4 pt-4 border-t border-slate-100 animate-slide-up">
                                    <div className="flex items-center justify-between mb-2">
                                        <span className="text-xs font-bold text-slate-400 uppercase tracking-wider">Gemini YanÄ±tÄ±:</span>
                                        <button onClick={() => setResponse(null)} className="text-slate-400 hover:text-red-500 text-xs">Temizle</button>
                                    </div>
                                    <div className="ai-response bg-white p-4 rounded-lg border border-slate-100 shadow-sm text-slate-700 overflow-x-auto" dangerouslySetInnerHTML={{ __html: response.text }} />
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // --- GÃœNLÃœK PLAN OLUÅTURUCU ---
        function DailyPlanSection({ data, meta, apiKey }) {
            const [teacherName, setTeacherName] = React.useState("");
            const [schoolName, setSchoolName] = React.useState("");
            const [className, setClassName] = React.useState("");
            const [principalName, setPrincipalName] = React.useState("");
            const [date, setDate] = React.useState("");
            const [lessonName, setLessonName] = React.useState("BiliÅŸim Teknolojileri ve YazÄ±lÄ±m");
            
            const [selectedOutcomes, setSelectedOutcomes] = React.useState([]);
            const [hasInclusionStudents, setHasInclusionStudents] = React.useState(false);
            const [planResult, setPlanResult] = React.useState(null);
            const [loading, setLoading] = React.useState(false);

            React.useEffect(() => {
                const saved = localStorage.getItem('btyTeacherProfile');
                if (saved) {
                    const p = JSON.parse(saved);
                    if(p.name) setTeacherName(p.name);
                    if(p.school) setSchoolName(p.school);
                    if(p.principal) setPrincipalName(p.principal);
                }
            }, []);

            const currentOutcomes = React.useMemo(() => {
                const gradeOutcomes = LEARNING_OUTCOMES[meta.grade] || {};
                const normalizedTitle = normalizeThemeName(data.title);
                const filtered = Object.entries(gradeOutcomes).filter(([code, obj]) => {
                    const normalizedOutcomeTheme = normalizeThemeName(obj.theme);
                    return normalizedOutcomeTheme && (normalizedTitle.includes(normalizedOutcomeTheme) || normalizedOutcomeTheme.includes(normalizedTitle));
                });
                return filtered.length > 0 ? filtered : Object.entries(gradeOutcomes);
            }, [meta.grade, data.title]);

            const handleOutcomeChange = (e) => {
                const options = e.target.options;
                const newSelected = [];
                for (let i = 0; i < options.length; i++) {
                    if (options[i].selected) {
                        newSelected.push({ code: options[i].value, text: options[i].getAttribute('data-text') });
                    }
                }
                setSelectedOutcomes(newSelected);
            };

            const handleGeneratePlan = async () => {
                if (!teacherName || !className || !date || selectedOutcomes.length === 0) {
                    alert("LÃ¼tfen en azÄ±ndan Ã–ÄŸretmen AdÄ±, SÄ±nÄ±f, Tarih alanlarÄ±nÄ± doldurun ve en az bir KazanÄ±m seÃ§in.");
                    return;
                }
                setLoading(true);
                setPlanResult(null);

                const enrichmentList = data.enrichment.map(item => `- ${item}`).join("\n");
                const supportList = data.support.map(item => `- ${item}`).join("\n");
                const outcomeCodesStr = selectedOutcomes.map(o => o.code).join(", ");
                const outcomeFullStr = selectedOutcomes.map(o => `${o.code}: ${o.text}`).join("\n");
                const inclusionPrompt = hasInclusionStudents ? "Ã–NEMLÄ°: SÄ±nÄ±fta kaynaÅŸtÄ±rma/Ã¶zel gereksinimli Ã¶ÄŸrenciler var. 'AÃ§Ä±klamalar' tablosunda onlar iÃ§in 1-2 cÃ¼mlelik Ã¶zel uyarlama Ã¶nerisi yaz." : "";

                const prompt = `Sen TÃ¼rkiye'de Ã§alÄ±ÅŸan deneyimli bir BiliÅŸim Teknolojileri Ã¶ÄŸretmeni ve plan uzmanÄ±sÄ±n. MEB formatÄ±na uygun GÃœNLÃœK PLAN oluÅŸtur.
                Ã–ÄŸretmen: ${teacherName}, Okul: ${schoolName}, SÄ±nÄ±f: ${className}, Ders: ${lessonName}, Tarih: ${date}, MÃ¼dÃ¼r: ${principalName}.
                Tema: ${data.title}. SÄ±nÄ±f: ${meta.grade}. Ders: ${meta.lesson}.
                KAZANIMLAR: ${outcomeCodesStr}\n${outcomeFullStr}.
                ELDEKÄ° MATERYALLER (ZenginleÅŸtirme): ${enrichmentList}. (Destekleme): ${supportList}.
                ${inclusionPrompt}
                Ã‡IKTI FORMATI: Sadece HTML TABLOLAR. 5 Tablo: 1) Temel Bilgiler, 2) Pedagojik GÃ¶vde (YÃ¶ntem, AraÃ§, Etkinlikler), 3) Ã–lÃ§me-DeÄŸerlendirme, 4) AÃ§Ä±klamalar, 5) Ä°mza. TÃ¼rkÃ§e.`;

                const result = await generateWithGemini(prompt, apiKey);
                setPlanResult(result);
                setLoading(false);
            };

            const copyToClipboard = () => {
                const el = document.createElement('div');
                el.innerHTML = planResult;
                document.body.appendChild(el);
                window.getSelection().removeAllRanges();
                const range = document.createRange();
                range.selectNode(el);
                window.getSelection().addRange(range);
                document.execCommand('copy');
                document.body.removeChild(el);
                alert("Plan kopyalandÄ±!");
            };

            return (
                <div className="mt-8 border-t border-slate-200 pt-8">
                    <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 no-print">
                        <div className="flex items-center gap-3 mb-6 border-b border-blue-100 pb-3">
                            <span className="text-2xl">ğŸ“…</span>
                            <h3 className="text-lg font-bold text-slate-800">MEB Uyumlu GÃ¼nlÃ¼k Plan OluÅŸturucu</h3>
                        </div>
                        <div className="grid md:grid-cols-2 gap-4 mb-4">
                            <div><label className="block text-xs font-semibold text-slate-500 uppercase mb-1">Ã–ÄŸretmen AdÄ±</label><input type="text" value={teacherName} onChange={e => setTeacherName(e.target.value)} className="w-full border border-slate-300 rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-200" /></div>
                            <div><label className="block text-xs font-semibold text-slate-500 uppercase mb-1">Okul AdÄ±</label><input type="text" value={schoolName} onChange={e => setSchoolName(e.target.value)} className="w-full border border-slate-300 rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-200" /></div>
                            <div><label className="block text-xs font-semibold text-slate-500 uppercase mb-1">SÄ±nÄ±f / Åube</label><input type="text" value={className} onChange={e => setClassName(e.target.value)} className="w-full border border-slate-300 rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-200" /></div>
                            <div><label className="block text-xs font-semibold text-slate-500 uppercase mb-1">Tarih</label><input type="date" value={date} onChange={e => setDate(e.target.value)} className="w-full border border-slate-300 rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-200" /></div>
                            <div><label className="block text-xs font-semibold text-slate-500 uppercase mb-1">Okul MÃ¼dÃ¼rÃ¼</label><input type="text" value={principalName} onChange={e => setPrincipalName(e.target.value)} className="w-full border border-slate-300 rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-200" /></div>
                            <div className="md:col-span-2">
                                <label className="block text-xs font-semibold text-slate-500 uppercase mb-1">KazanÄ±m SeÃ§imi (Ã‡oklu seÃ§im iÃ§in Ctrl/Cmd basÄ±lÄ± tutun)</label>
                                <select multiple className="w-full border border-slate-300 rounded px-3 py-2 text-sm h-32 outline-none focus:ring-2 focus:ring-blue-200" onChange={handleOutcomeChange}>
                                    {currentOutcomes.map(([code, obj]) => (
                                        <option key={code} value={code} data-text={obj.text}>{code} - {obj.text.substring(0, 80)}...</option>
                                    ))}
                                </select>
                            </div>
                            <div className="md:col-span-2"><label className="flex items-center gap-2 cursor-pointer"><input type="checkbox" checked={hasInclusionStudents} onChange={e => setHasInclusionStudents(e.target.checked)} className="w-4 h-4 text-blue-600 rounded" /><span className="text-sm text-slate-700">SÄ±nÄ±fta kaynaÅŸtÄ±rma Ã¶ÄŸrencisi var</span></label></div>
                        </div>
                        <button onClick={handleGeneratePlan} disabled={loading} className="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg shadow transition duration-200 flex items-center justify-center gap-2">{loading ? 'Plan HazÄ±rlanÄ±yor...' : 'ğŸ“„ GÃ¼nlÃ¼k PlanÄ± OluÅŸtur'}</button>
                    </div>
                    {planResult && (
                        <div id="printable-area" className="mt-8 bg-white p-8 rounded-2xl shadow-lg border border-slate-200 animate-slide-up">
                            <div className="flex justify-between items-center mb-6 no-print">
                                <h4 className="font-bold text-slate-800 text-lg">OluÅŸturulan GÃ¼nlÃ¼k Plan</h4>
                                <button onClick={copyToClipboard} className="bg-blue-50 text-blue-600 hover:bg-blue-100 px-3 py-1.5 rounded text-sm font-medium border border-blue-100">Kopyala</button>
                            </div>
                            <div className="plan-table prose max-w-none text-gray-800" dangerouslySetInnerHTML={{ __html: planResult }} />
                        </div>
                    )}
                </div>
            );
        }

        function ActivitySection({ title, items, type }) {
            const colorClass = type === 'enrichment' ? 'text-purple-800 bg-purple-50 border-purple-200' : 'text-amber-800 bg-amber-50 border-amber-200';
            return (
                <div className={`rounded-xl border overflow-hidden h-full ${type === 'enrichment' ? 'border-purple-200' : 'border-amber-200'}`}>
                    <div className={`${type === 'enrichment' ? 'bg-purple-50' : 'bg-amber-50'} px-5 py-3 border-b flex items-center gap-2 ${type === 'enrichment' ? 'border-purple-200' : 'border-amber-200'}`}>
                        <h3 className={`font-bold ${type === 'enrichment' ? 'text-purple-800' : 'text-amber-800'}`}>{title}</h3>
                    </div>
                    <div className="p-5 bg-white h-full">
                        <ul className="space-y-4">
                            {items.map((item, idx) => (
                                <li key={idx} className="flex gap-3 text-sm text-slate-700"><span className="font-bold">{idx + 1}.</span> {item}</li>
                            ))}
                        </ul>
                    </div>
                </div>
            );
        }

        function ResultCard({ data, meta, apiKey }) {
            if (!data) return null;
            return (
                <div className="mt-8 animate-slide-up pb-20">
                    <div className="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden">
                        <div className="bg-slate-800 text-white px-8 py-6 no-print">
                            <p className="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">{meta.grade} â€¢ {meta.lesson}</p>
                            <h2 className="text-2xl font-bold">{data.title}</h2>
                        </div>
                        <div className="p-8">
                            <div className="grid md:grid-cols-2 gap-8 mb-8 no-print">
                                <ActivitySection title="ZenginleÅŸtirme (Enrichment)" items={data.enrichment} type="enrichment" />
                                <ActivitySection title="Destekleme (Support)" items={data.support} type="support" />
                            </div>
                            <AIAssistant context={{ ...meta, unit: data.title }} apiKey={apiKey} />
                            <DailyPlanSection data={data} meta={meta} apiKey={apiKey} />
                        </div>
                    </div>
                </div>
            );
        }

        function App() {
            const [resultData, setResultData] = React.useState(null);
            const [metaData, setMetaData] = React.useState(null);
            const [loading, setLoading] = React.useState(false);
            const [apiKey, setApiKey] = React.useState(localStorage.getItem('gemini_key') || '');

            const handleSearch = (data, meta) => {
                setLoading(true);
                setResultData(null);
                setTimeout(() => { setResultData(data); setMetaData(meta); setLoading(false); }, 400);
            };

            const handleLogoClick = () => {
                window.location.reload();
            };

            return (
                <div className="min-h-screen bg-[#f8fafc]">
                    <Header onLogoClick={handleLogoClick} />
                    
                    <main className="container mx-auto px-4 max-w-6xl">
                        {/* API Key Input (Safe Zone) */}
                        <APIKeyInput apiKey={apiKey} setApiKey={setApiKey} />

                        {/* Ã–ÄŸretmen Profili */}
                        <TeacherProfileCard />

                        <div className="text-center mb-10 no-print">
                            <h2 className="text-3xl font-extrabold text-slate-800 mb-3 tracking-tight">FarklÄ±laÅŸtÄ±rÄ±lmÄ±ÅŸ Etkinlik Havuzu</h2>
                            <p className="text-slate-500 max-w-2xl mx-auto">
                                <span className="text-blue-600 font-semibold">BiliÅŸim Teknolojileri ve YazÄ±lÄ±m</span> dersi iÃ§in mÃ¼fredat etkinliklerine ve <span className="text-blue-600 font-semibold">Yapay Zeka (Gemini)</span> Ã¶nerilerine buradan ulaÅŸabilirsiniz.
                            </p>
                        </div>

                        <InfoBox />

                        <FilterBar onSearch={handleSearch} />

                        {loading && (
                            <div className="flex flex-col items-center mt-16 no-print">
                                <div className="animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-blue-600 mb-4"></div>
                                <span className="text-blue-600 font-medium animate-pulse">Etkinlikler getiriliyor...</span>
                            </div>
                        )}

                        {!loading && !resultData && (
                            <div className="mt-12 text-center py-16 bg-white rounded-2xl border border-dashed border-slate-300 no-print">
                                <div className="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-300">
                                    <svg className="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </div>
                                <h3 className="text-lg font-medium text-slate-900">HenÃ¼z seÃ§im yapÄ±lmadÄ±</h3>
                                <p className="text-slate-500 mt-1">LÃ¼tfen yukarÄ±daki menÃ¼den sÄ±nÄ±f ve tema seÃ§iniz.</p>
                            </div>
                        )}

                        <ResultCard data={resultData} meta={metaData} apiKey={apiKey} />
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>